<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Mandi GOLD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg:#000;
  --card:#111;
  --text:#fff;
}
.light {
  --bg:#f2f2f2;
  --card:#fff;
  --text:#000;
}
body { margin:0; font-family:Arial; background:var(--bg); color:var(--text); }

#splash {
  position:fixed; inset:0; background:#000; color:#FFD700;
  display:flex; align-items:center; justify-content:center;
  font-size:32px; z-index:9999;
}

.tab { display:none; padding:10px; }
.tab.active { display:block; }

.bottom-nav {
  position:fixed; bottom:0; width:100%; display:flex;
  background:#111; border-top:1px solid #333;
}
.bottom-nav button {
  flex:1; padding:8px; background:none; color:white; border:none;
}
.bottom-nav img { width:28px; }

.card {
  display:flex; gap:10px; margin:10px 0;
  background:var(--card); padding:10px; border-radius:10px;
}
.card img { width:30%; border-radius:8px; }
.card h4 { width:70%; margin:0; }

iframe { width:100%; height:200px; border-radius:10px; }
select,input{ padding:6px; margin:4px; width:48%; }

.toggle {
  position:fixed; top:10px; right:10px;
}
</style>
</head>

<body>

<div id="splash">ðŸŒ¾ Mandi GOLD</div>

<div class="toggle">
<button onclick="toggleTheme()">ðŸŒ“</button>
</div>

<div id="bhav" class="tab active"></div>
<div id="news" class="tab"></div>
<div id="trend" class="tab"></div>
<div id="mausam" class="tab"></div>
<div id="video" class="tab"></div>

<div class="bottom-nav">
  <button onclick="showTab('bhav')"><img src="bhav.png"><br>Bhav</button>
  <button onclick="showTab('news')"><img src="news.png"><br>News</button>
  <button onclick="showTab('trend')"><img src="trend.png"><br>Teji/Mandi</button>
  <button onclick="showTab('mausam')"><img src="mausam.png"><br>Mausam</button>
  <button onclick="showTab('video')"><img src="video.png"><br>Video</button>
</div>

<script>
const SHEET_ID = "1SX6L73WQ57OJ0tUUJwEjmSVgn3LjJLe54B4Lp_JN2SE";

const TABS = ["bhav","news","trend","mausam","video"];
let currentTab = localStorage.getItem("tab") || "bhav";

function showTab(tab){
  TABS.forEach(t=>document.getElementById(t).classList.remove("active"));
  document.getElementById(tab).classList.add("active");
  localStorage.setItem("tab",tab);
}

showTab(currentTab);

function toggleTheme(){
  document.body.classList.toggle("light");
}

setTimeout(()=>document.getElementById("splash").style.display="none",2000);

// Fetch Functions
function loadSheet(name, cb){
 fetch(`https://opensheet.elk.sh/${SHEET_ID}/${name}`)
 .then(r=>r.json()).then(cb);
}

loadSheet("News", data=>{
 document.getElementById("news").innerHTML = data.reverse().map(n=>`
 <div class="card" onclick="alert('${n.FullNews}')">
  <img src="${n.ImageURL}">
  <h4>${n.Title}</h4>
 </div>`).join("");
});

loadSheet("TejiMandi", data=>{
 document.getElementById("trend").innerHTML = data.reverse().map(n=>`
 <div class="card" onclick="alert('${n.FullReport}')">
  <img src="${n.ImageURL}">
  <h4>${n.Title}</h4>
 </div>`).join("");
});

loadSheet("Mausam", data=>{
 document.getElementById("mausam").innerHTML = data.reverse().map(n=>`
 <div class="card"><h4>${n.Title}</h4><p>${n.FullUpdate}</p></div>
 `).join("");
});

loadSheet("Video", data=>{
 document.getElementById("video").innerHTML = data.reverse().map(v=>{
   let id = v.YouTubeLink.split("v=")[1];
   return `<div class="card">
     <img src="https://img.youtube.com/vi/${id}/hqdefault.jpg">
     <h4 onclick="this.parentElement.innerHTML='<iframe src=https://www.youtube.com/embed/${id}?autoplay=1 allowfullscreen></iframe>'">
       ${v.Title}
     </h4>
   </div>`;
 }).join("");
});
</script>

</body>
</html>
