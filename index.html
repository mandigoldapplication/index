<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mandi GOLD</title>
<style>
:root{--bg:#0d0f12;--card:#111;--text:#fff;--green:#0f9d58}
.light{--bg:#f4f4f4;--card:#fff;--text:#000}
body{margin:0;font-family:Arial;background:var(--bg);color:var(--text)}
header{background:var(--green);color:#fff;padding:12px;text-align:center}
.tab{display:none;padding:12px;padding-bottom:90px}
.tab.active{display:block}
.card{background:var(--card);padding:10px;border-radius:10px;margin:10px 0}
.bottom{position:fixed;bottom:0;width:100%;display:flex;background:#111}
.bottom button{flex:1;border:0;background:none;color:#fff;padding:8px}
iframe{width:100%;height:200px;border-radius:10px;border:0}
img{border-radius:8px}
</style>
</head>
<body>

<header>ğŸŒ¾ Mandi GOLD</header>

<div id="bhav" class="tab active"></div>
<div id="news" class="tab"></div>
<div id="trend" class="tab"></div>
<div id="weather" class="tab"></div>
<div id="video" class="tab"></div>

<div class="bottom">
<button onclick="openTab('bhav')">ğŸŒ¾ Bhav</button>
<button onclick="openTab('news')">ğŸ“° News</button>
<button onclick="openTab('trend')">ğŸ“ˆ Teji</button>
<button onclick="openTab('weather')">ğŸŒ¦ï¸ Mausam</button>
<button onclick="openTab('video')">ğŸ¥ Video</button>
</div>

<script>
const SHEET_ID="1SX6L73WQ57OJ0tUUJwEjmSVgn3LjJLe54B4Lp_JN2SE";

function openTab(t){
 document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
 document.getElementById(t).classList.add('active');
 localStorage.tab=t;
}
if(localStorage.tab)openTab(localStorage.tab);

async function load(sheet){
 let r=await fetch(`https://opensheet.elk.sh/${SHEET_ID}/${sheet}`);
 return r.json();
}

/* -------- BHAV -------- */
load("Bhav").then(d=>{
 bhav.innerHTML=d.reverse().map(r=>`
 <div class="card">
 <b>${r.Date}</b><br>
 ${r.State} - ${r.Mandi} - ${r.Fasal}<br>
 Min: â‚¹${r.Min} | Max: â‚¹${r.Max} | Modal: â‚¹${r.Modal}<br>
 Trend: ${r.Trend}
 </div>`).join("");
});

/* -------- NEWS -------- */
load("News").then(d=>{
 news.innerHTML=d.reverse().map((n,i)=>`
 <div class="card" onclick="toggle('n${i}')">
 <img src="${n.ImageURL}" width="100%"><br>
 <b>${n.Title}</b>
 <p id="n${i}" style="display:none">${n.Detail}</p>
 </div>`).join("");
});

/* -------- TREND -------- */
load("Trend").then(d=>{
 trend.innerHTML=d.reverse().map((n,i)=>`
 <div class="card" onclick="toggle('t${i}')">
 <img src="${n.ImageURL}" width="100%"><br>
 <b>${n.Title}</b>
 <p id="t${i}" style="display:none">${n.Detail}</p>
 </div>`).join("");
});

/* -------- MAUSAM -------- */
load("Weather").then(d=>{
 weather.innerHTML=d.reverse().map((n,i)=>`
 <div class="card" onclick="toggle('w${i}')">
 <b>${n.Title}</b>
 <p id="w${i}" style="display:none">${n.Detail}</p>
 </div>`).join("");
});

/* -------- VIDEO -------- */
load("Video").then(d=>{
 video.innerHTML=d.reverse().map(v=>{
 let id=v.VideoURL.split("v=")[1];
 return `<div class="card">
 <img src="https://img.youtube.com/vi/${id}/hqdefault.jpg" width="100%">
 <h4 onclick="this.parentElement.innerHTML='<iframe src=https://www.youtube.com/embed/${id}?autoplay=1 allowfullscreen></iframe>'">
 ${v.Title}
 </h4>
 </div>`
 }).join("");
});

function toggle(id){
 let e=document.getElementById(id);
 e.style.display=e.style.display==="none"?"block":"none";
}
</script>

</body>
</html>
